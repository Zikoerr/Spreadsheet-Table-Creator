<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nafass Perfumes Table Creator</title>
    <!-- Use Tailwind CSS for a modern and responsive design -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        /* Custom styles for multi-select to ensure it looks consistent */
        select[multiple] {
            height: auto;
        }
        select[multiple] option {
            padding: 8px 12px;
            border-bottom: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    Â  Â  <div class="max-w-4xl mx-auto bg-white p-6 md:p-10 rounded-xl shadow-lg">
    Â  Â  Â  Â  <a href="/index2.html" class="text-blue-600 hover:underline">general table</a>
    Â  Â  Â  Â  <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Nafass Perfumes</h1>
    Â  Â  Â  Â  <p class="text-center text-gray-600 mb-8 text-sm italic">Created by zikoerr (Zakaria er-rahmouny)</p>
    
    Â  Â  Â  Â  Â  Â  Â  Â  <div id="dataEntry">
    Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-800 mb-4">Enter Data</h2>
    Â  Â  Â  Â  Â  Â  <div id="inputContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
    Â  Â  Â  Â  Â  Â  <div class="flex flex-col sm:flex-row gap-4">
    Â  Â  Â  Â  Â  Â  Â  Â  <button id="addRowButton" class="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition duration-300 shadow-md">Add Row</button>
    Â  Â  Â  Â  Â  Â  Â  Â  <button id="copyButton" class="flex-1 bg-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition duration-300 shadow-md">Copy Table to Clipboard</button>
    Â  Â  Â  Â  Â  Â  Â  Â  <button id="exportCsvButton" class="flex-1 bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-md">Export as CSV</button>
    Â  Â  Â  Â  Â  Â  </div>
    Â  Â  Â  Â  Â  Â  <div class="flex flex-col sm:flex-row gap-4 mt-4">
    Â  Â  Â  Â  Â  Â  Â  Â  <label for="csvFileInput" class="flex-1 bg-gray-200 text-gray-800 font-bold py-3 px-6 rounded-lg cursor-pointer text-center hover:bg-gray-300 transition duration-300 shadow-md">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Import CSV File
    Â  Â  Â  Â  Â  Â  Â  Â  </label>
    Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="csvFileInput" accept=".csv" class="hidden">
    Â  Â  Â  Â  Â  Â  </div>
    Â  Â  Â  Â  </div>
    
    Â  Â  Â  Â  Â  Â  Â  Â  <div id="tableDisplay" class="mt-8">
    Â  Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-gray-800 mb-4">Your Table</h2>
    Â  Â  Â  Â  Â  Â  <div class="bg-gray-100 p-4 rounded-lg shadow-inner overflow-x-auto">
    Â  Â  Â  Â  Â  Â  Â  Â  <table class="w-full text-left whitespace-nowrap">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <thead>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tr id="tableHeaders" class="text-gray-700 font-semibold border-b-2 border-gray-300"></tr>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </thead>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <tbody id="tableBody"></tbody>
    Â  Â  Â  Â  Â  Â  Â  Â  </table>
    Â  Â  Â  Â  Â  Â  </div>
    Â  Â  Â  Â  Â  Â  <div id="messageBox" class="mt-4 p-3 hidden rounded-lg text-center font-semibold"></div>
    Â  Â  Â  Â  </div>
    Â  Â  </div>
    
    Â  Â  <script>
    Â  Â  Â  Â  // Get all necessary DOM elements
    Â  Â  Â  Â  const dataEntry = document.getElementById('dataEntry');
    Â  Â  Â  Â  const inputContainer = document.getElementById('inputContainer');
    Â  Â  Â  Â  const addRowButton = document.getElementById('addRowButton');
    Â  Â  Â  Â  const copyButton = document.getElementById('copyButton');
    Â  Â  Â  Â  const exportCsvButton = document.getElementById('exportCsvButton');
    Â  Â  Â  Â  const csvFileInput = document.getElementById('csvFileInput');
    Â  Â  Â  Â  const tableDisplay = document.getElementById('tableDisplay');
    Â  Â  Â  Â  const tableHeaders = document.getElementById('tableHeaders');
    Â  Â  Â  Â  const tableBody = document.getElementById('tableBody');
    Â  Â  Â  Â  const messageBox = document.getElementById('messageBox');
    
    Â  Â  Â  Â  // Pre-defined headers and their types based on the user's request
    Â  Â  Â  Â  const headers = [
    Â  Â  Â  Â  Â  Â  { name: 'id', type: 'number' },
    Â  Â  Â  Â  Â  Â  { name: 'name', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'slug', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'brand', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'description', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'price', type: 'number' },
    Â  Â  Â  Â  Â  Â  { name: 'original_img', type: 'url' },
    Â  Â  Â  Â  Â  Â  { name: 'image', type: 'text' }, // Changed to text to handle multiple URLs
    Â  Â  Â  Â  Â  Â  { name: 'category', type: 'select' },
    Â  Â  Â  Â  Â  Â  { name: 'top_notes', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'heart_notes', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'base_notes', type: 'text' },
    Â  Â  Â  Â  Â  Â  { name: 'sizes', type: 'select' },
    Â  Â  Â  Â  Â  Â  { name: 'availability', type: 'select' },
    Â  Â  Â  Â  Â  Â  { name: 'season', type: 'multi-select' }
    Â  Â  Â  Â  ];
    
    Â  Â  Â  Â  let tableData = [];
    
    Â  Â  Â  Â  // Function to show a message to the user
    Â  Â  Â  Â  function showMessage(text, type = 'success') {
    Â  Â  Â  Â  Â  Â  messageBox.textContent = text;
    Â  Â  Â  Â  Â  Â  messageBox.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
    Â  Â  Â  Â  Â  Â  if (type === 'success') {
    Â  Â  Â  Â  Â  Â  Â  Â  messageBox.classList.add('bg-green-100', 'text-green-800');
    Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  messageBox.classList.add('bg-red-100', 'text-red-800');
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  setTimeout(() => {
    Â  Â  Â  Â  Â  Â  Â  Â  messageBox.classList.add('hidden');
    Â  Â  Â  Â  Â  Â  }, 3000);
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Function to render the table on the page with edit and delete buttons
    Â  Â  Â  Â  function renderTable() {
    Â  Â  Â  Â  Â  Â  tableHeaders.innerHTML = '';
    Â  Â  Â  Â  Â  Â  tableBody.innerHTML = '';
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Add the 'Actions' header
    Â  Â  Â  Â  Â  Â  const actionHeader = document.createElement('th');
    Â  Â  Â  Â  Â  Â  actionHeader.classList.add('p-3');
    Â  Â  Â  Â  Â  Â  actionHeader.textContent = 'Actions';
    Â  Â  Â  Â  Â  Â  tableHeaders.appendChild(actionHeader);
    
    Â  Â  Â  Â  Â  Â  headers.forEach(header => {
    Â  Â  Â  Â  Â  Â  Â  Â  const th = document.createElement('th');
    Â  Â  Â  Â  Â  Â  Â  Â  th.classList.add('p-3');
    Â  Â  Â  Â  Â  Â  Â  Â  th.textContent = header.name;
    Â  Â  Â  Â  Â  Â  Â  Â  tableHeaders.appendChild(th);
    Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  tableData.forEach((row, index) => {
    Â  Â  Â  Â  Â  Â  Â  Â  const tr = document.createElement('tr');
    Â  Â  Â  Â  Â  Â  Â  Â  tr.classList.add('border-b', 'border-gray-200');
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  // Add the action buttons cell
    Â  Â  Â  Â  Â  Â  Â  Â  const actionTd = document.createElement('td');
    Â  Â  Â  Â  Â  Â  Â  Â  actionTd.classList.add('p-3', 'text-gray-800');
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  const editButton = document.createElement('button');
    Â  Â  Â  Â  Â  Â  Â  Â  editButton.classList.add('text-blue-500', 'hover:text-blue-700', 'font-bold', 'mr-2');
    Â  Â  Â  Â  Â  Â  Â  Â  editButton.textContent = 'âœï¸';
    Â  Â  Â  Â  Â  Â  Â  Â  editButton.onclick = () => editRow(index);
    
    Â  Â  Â  Â  Â  Â  Â  Â  const deleteButton = document.createElement('button');
    Â  Â  Â  Â  Â  Â  Â  Â  deleteButton.classList.add('text-red-500', 'hover:text-red-700', 'font-bold');
    Â  Â  Â  Â  Â  Â  Â  Â  deleteButton.textContent = 'ğŸ—‘ï¸';
    Â  Â  Â  Â  Â  Â  Â  Â  deleteButton.onclick = () => deleteRow(index);
    
    Â  Â  Â  Â  Â  Â  Â  Â  actionTd.appendChild(editButton);
    Â  Â  Â  Â  Â  Â  Â  Â  actionTd.appendChild(deleteButton);
    Â  Â  Â  Â  Â  Â  Â  Â  tr.appendChild(actionTd);
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  headers.forEach(header => {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const td = document.createElement('td');
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.classList.add('p-3', 'text-gray-800');
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  td.textContent = row[header.name];
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tr.appendChild(td);
    Â  Â  Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  Â  Â  Â  Â  tableBody.appendChild(tr);
    Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  }
    
    Â  Â  Â  Â  // Function to initialize the app by setting up the input fields
    Â  Â  Â  Â  function initializeApp() {
    Â  Â  Â  Â  Â  Â  // Dynamically create data input fields for all headers except 'id'
    Â  Â  Â  Â  Â  Â  inputContainer.innerHTML = '';
    Â  Â  Â  Â  Â  Â  headers.filter(h => h.name !== 'id').forEach(header => {
    Â  Â  Â  Â  Â  Â  Â  Â  const inputWrapper = document.createElement('div');
    Â  Â  Â  Â  Â  Â  Â  Â  inputWrapper.classList.add('flex', 'flex-col');
    Â  Â  Â  Â  Â  Â  Â  Â  let inputHtml = '';
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  // Determine the input type based on the header definition
    Â  Â  Â  Â  Â  Â  Â  Â  switch (header.name) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'category':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled selected>Select a category</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Men">Men</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Women">Women</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Unisex">Unisex</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'sizes':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled selected>Select a size</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="50 ml">50 ml</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="30 ml">30 ml</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Both">Both of them</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'season':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200" multiple size="7">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Winter">â„ï¸ Winter</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Summer">â˜€ï¸ Summer</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Autumn">ğŸ‚ Autumn</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Spring">ğŸŒ¸ Spring</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="All-year">ğŸ”„ All-year</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Autumn & Winter">ğŸ‚â„ï¸ Autumn & Winter</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Spring & Summer">ğŸŒ¸â˜€ï¸ Spring & Summer</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'availability':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="" disabled selected>Select availability</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="In-Stock">In-Stock</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Out-of-Stock">Out-of-Stock</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'image':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <textarea id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200" placeholder="Enter image URLs, separated by commas"></textarea>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  default:
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label class="text-sm font-medium text-gray-600 mb-1">${header.name}</label>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="${header.type}" id="input-${header.name}" class="data-input p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200" placeholder="Enter ${header.name}">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  inputWrapper.innerHTML = inputHtml;
    Â  Â  Â  Â  Â  Â  Â  Â  inputContainer.appendChild(inputWrapper);
    Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Add event listener to the 'name' input to auto-generate the slug
    Â  Â  Â  Â  Â  Â  const nameInput = document.getElementById('input-name');
    Â  Â  Â  Â  Â  Â  const slugInput = document.getElementById('input-slug');
    Â  Â  Â  Â  Â  Â  if (nameInput && slugInput) {
    Â  Â  Â  Â  Â  Â  Â  Â  nameInput.addEventListener('input', () => {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nameValue = nameInput.value;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const slug = nameValue.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]+/g, '');
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  slugInput.value = slug;
    Â  Â  Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  renderTable();
    
    Â  Â  Â  Â  Â  Â  // Focus on the first input field
    Â  Â  Â  Â  Â  Â  const firstInput = document.querySelector('.data-input:not([multiple])');
    Â  Â  Â  Â  Â  Â  if (firstInput) {
    Â  Â  Â  Â  Â  Â  Â  Â  firstInput.focus();
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  }
    Â  Â  Â  Â  
    Â  Â  Â  Â  // Call the initialization function on page load
    Â  Â  Â  Â  initializeApp();
    
    Â  Â  Â  Â  // Function to delete a row
    Â  Â  Â  Â  function deleteRow(index) {
    Â  Â  Â  Â  Â  Â  if (confirm("Are you sure you want to delete this row?")) {
    Â  Â  Â  Â  Â  Â  Â  Â  tableData.splice(index, 1); // Remove the row from the data array
    Â  Â  Â  Â  Â  Â  Â  Â  renderTable(); // Re-render the table
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Row deleted successfully!");
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  }
    
    Â  Â  Â  Â  // Function to edit a row
    Â  Â  Â  Â  function editRow(index) {
    Â  Â  Â  Â  Â  Â  const rowToEdit = tableBody.children[index];
    Â  Â  Â  Â  Â  Â  const dataToEdit = tableData[index];
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  if (rowToEdit.dataset.editing === 'true') {
    Â  Â  Â  Â  Â  Â  Â  Â  return; // Prevent multiple edits on the same row
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  rowToEdit.dataset.editing = 'true';
    
    Â  Â  Â  Â  Â  Â  const cells = rowToEdit.querySelectorAll('td');
    
    Â  Â  Â  Â  Â  Â  // Hide edit and delete buttons and show save and cancel buttons
    Â  Â  Â  Â  Â  Â  const actionTd = cells[0];
    Â  Â  Â  Â  Â  Â  actionTd.innerHTML = `
    Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="saveRow(${index})" class="text-green-500 hover:text-green-700 font-bold mr-2">âœ…</button>
    Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="cancelEdit(${index})" class="text-red-500 hover:text-red-700 font-bold">âŒ</button>
    Â  Â  Â  Â  Â  Â  `;
    
    Â  Â  Â  Â  Â  Â  // Replace text with input fields for each data cell
    Â  Â  Â  Â  Â  Â  headers.forEach((header, headerIndex) => {
    Â  Â  Â  Â  Â  Â  Â  Â  const cell = cells[headerIndex + 1]; // +1 to account for the actions cell
    Â  Â  Â  Â  Â  Â  Â  Â  const value = dataToEdit[header.name] || '';
    
    Â  Â  Â  Â  Â  Â  Â  Â  let inputHtml = '';
    Â  Â  Â  Â  Â  Â  Â  Â  switch (header.name) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'id':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `<span>${value}</span>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'category':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select class="p-1 border rounded-lg w-full">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Men" ${value === 'Men' ? 'selected' : ''}>Men</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Women" ${value === 'Women' ? 'selected' : ''}>Women</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Unisex" ${value === 'Unisex' ? 'selected' : ''}>Unisex</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'sizes':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select class="p-1 border rounded-lg w-full">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="50 ml" ${value === '50 ml' ? 'selected' : ''}>50 ml</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="30 ml" ${value === '30 ml' ? 'selected' : ''}>30 ml</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Both" ${value === 'Both' ? 'selected' : ''}>Both of them</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'availability':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select class="p-1 border rounded-lg w-full">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="In-Stock" ${value === 'In-Stock' ? 'selected' : ''}>In-Stock</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Out-of-Stock" ${value === 'Out-of-Stock' ? 'selected' : ''}>Out-of-Stock</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'season':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const selectedSeasons = value.split(',').map(s => s.trim());
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <select class="p-1 border rounded-lg w-full" multiple size="7">
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Winter" ${selectedSeasons.includes('Winter') ? 'selected' : ''}>â„ï¸ Winter</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Summer" ${selectedSeasons.includes('Summer') ? 'selected' : ''}>â˜€ï¸ Summer</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Autumn" ${selectedSeasons.includes('Autumn') ? 'selected' : ''}>ğŸ‚ Autumn</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Spring" ${selectedSeasons.includes('Spring') ? 'selected' : ''}>ğŸŒ¸ Spring</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="All-year" ${selectedSeasons.includes('All-year') ? 'selected' : ''}>ğŸ”„ All-year</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Autumn & Winter" ${selectedSeasons.includes('Autumn & Winter') ? 'selected' : ''}>ğŸ‚â„ï¸ Autumn & Winter</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <option value="Spring & Summer" ${selectedSeasons.includes('Spring & Summer') ? 'selected' : ''}>ğŸŒ¸â˜€ï¸ Spring & Summer</option>
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </select>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'description':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  case 'image':
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `<textarea class="p-1 border rounded-lg w-full">${value}</textarea>`;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  default:
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  inputHtml = `<input type="${header.type}" value="${value}" class="p-1 border rounded-lg w-full">`;
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  Â  Â  cell.innerHTML = inputHtml;
    Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  }
    
    Â  Â  Â  Â  // Function to save a modified row
    Â  Â  Â  Â  function saveRow(index) {
    Â  Â  Â  Â  Â  Â  const rowToEdit = tableBody.children[index];
    Â  Â  Â  Â  Â  Â  const newRowData = {};
    Â  Â  Â  Â  Â  Â  let isValid = true;
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  const cells = rowToEdit.querySelectorAll('td');
    
    Â  Â  Â  Â  Â  Â  headers.forEach((header, headerIndex) => {
    Â  Â  Â  Â  Â  Â  Â  Â  const cell = cells[headerIndex + 1];
    Â  Â  Â  Â  Â  Â  Â  Â  const inputElement = cell.querySelector('input, select, textarea');
    Â  Â  Â  Â  Â  Â  Â  Â  let value;
    
    Â  Â  Â  Â  Â  Â  Â  Â  if (inputElement) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (inputElement.tagName === 'SELECT' && inputElement.multiple) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value = Array.from(inputElement.selectedOptions).map(option => option.value).join(', ');
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value = inputElement.value;
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // For the 'id' field, which is a span
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value = cell.textContent;
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  Â  Â  newRowData[header.name] = value;
    Â  Â  Â  Â  Â  Â  });
    
    Â  Â  Â  Â  Â  Â  // Update the data array
    Â  Â  Â  Â  Â  Â  tableData[index] = newRowData;
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Re-render the table to show the updated data
    Â  Â  Â  Â  Â  Â  renderTable();
    Â  Â  Â  Â  Â  Â  showMessage("Row updated successfully!");
    Â  Â  Â  Â  }
    
    Â  Â  Â  Â  // Function to cancel an edit
    Â  Â  Â  Â  function cancelEdit(index) {
    Â  Â  Â  Â  Â  Â  const rowToEdit = tableBody.children[index];
    Â  Â  Â  Â  Â  Â  delete rowToEdit.dataset.editing;
    Â  Â  Â  Â  Â  Â  renderTable(); // Re-render the table to restore the original state
    Â  Â  Â  Â  Â  Â  showMessage("Edit cancelled.");
    Â  Â  Â  Â  }
    
    Â  Â  Â  Â  // Event listener for the "Add Row" button
    Â  Â  Â  Â  addRowButton.addEventListener('click', () => {
    Â  Â  Â  Â  Â  Â  const inputs = document.querySelectorAll('.data-input');
    Â  Â  Â  Â  Â  Â  if (inputs.length === 0) {
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Headers are not defined.", "error");
    Â  Â  Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  Â  Â  }
    
    Â  Â  Â  Â  Â  Â  const newRow = {};
    Â  Â  Â  Â  Â  Â  let allInputsEmpty = true;
    Â  Â  Â  Â  Â  Â  let isValid = true;
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Assign the auto-incremented ID
    Â  Â  Â  Â  Â  Â  newRow.id = tableData.length + 1;
    
    Â  Â  Â  Â  Â  Â  inputs.forEach((input) => {
    Â  Â  Â  Â  Â  Â  Â  Â  const header = headers.find(h => h.name === input.id.replace('input-', ''));
    Â  Â  Â  Â  Â  Â  Â  Â  if (!header) return;
    
    Â  Â  Â  Â  Â  Â  Â  Â  let value;
    Â  Â  Â  Â  Â  Â  Â  Â  if (input.tagName === 'SELECT' && input.multiple) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value = Array.from(input.selectedOptions).map(option => option.value).join(', ');
    Â  Â  Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  value = input.value.trim();
    Â  Â  Â  Â  Â  Â  Â  Â  }
    
    Â  Â  Â  Â  Â  Â  Â  Â  newRow[header.name] = value;
    Â  Â  Â  Â  Â  Â  Â  Â  if (value !== '' && value !== null) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  allInputsEmpty = false;
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  Â  Â  // Simple validation based on type
    Â  Â  Â  Â  Â  Â  Â  Â  if (header.type === 'number' && value !== '' && isNaN(Number(value))) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isValid = false;
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  });
    
    Â  Â  Â  Â  Â  Â  if (allInputsEmpty) {
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("Please fill out at least one field before adding a row.", "error");
    Â  Â  Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  if (!isValid) {
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("One or more number fields contain invalid data.", "error");
    Â  Â  Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  Â  Â  }
    
    Â  Â  Â  Â  Â  Â  // Add the new row to our data array
    Â  Â  Â  Â  Â  Â  tableData.push(newRow);
    
    Â  Â  Â  Â  Â  Â  // Clear the input fields for the next row
    Â  Â  Â  Â  Â  Â  inputs.forEach(input => {
    Â  Â  Â  Â  Â  Â  Â  Â  if (input.tagName === 'SELECT' && input.multiple) {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Array.from(input.options).forEach(option => option.selected = false);
    Â  Â  Â  Â  Â  Â  Â  Â  } else if (input.tagName === 'SELECT') {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.selectedIndex = 0;
    Â  Â  Â  Â  Â  Â  Â  Â  } else {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  input.value = '';
    Â  Â  Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  });
    
    Â  Â  Â  Â  Â  Â  // Update the display table
    Â  Â  Â  Â  Â  Â  renderTable();
    
    Â  Â  Â  Â  Â  Â  showMessage("Row added successfully!");
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Focus on the first input field
    Â  Â  Â  Â  Â  Â  const firstInput = document.querySelector('.data-input:not([multiple])');
    Â  Â  Â  Â  Â  Â  if (firstInput) {
    Â  Â  Â  Â  Â  Â  Â  Â  firstInput.focus();
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  });
    
    Â  Â  Â  Â  // Event listener for the "Copy Table to Clipboard" button
    Â  Â  Â  Â  copyButton.addEventListener('click', () => {
    Â  Â  Â  Â  Â  Â  if (tableData.length === 0) {
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("No data to copy. Add some rows first.", "error");
    Â  Â  Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  Â  Â  }
    
    Â  Â  Â  Â  Â  Â  // Create the tab-separated string
    Â  Â  Â  Â  Â  Â  let clipboardText = headers.map(h => h.name).join('\t') + '\n';
    Â  Â  Â  Â  Â  Â  tableData.forEach(row => {
    Â  Â  Â  Â  Â  Â  Â  Â  const rowValues = headers.map(header => row[header.name]);
    Â  Â  Â  Â  Â  Â  Â  Â  clipboardText += rowValues.join('\t') + '\n';
    Â  Â  Â  Â  Â  Â  });
    
    Â  Â  Â  Â  Â  Â  // Use a temporary textarea to copy to the clipboard
    Â  Â  Â  Â  Â  Â  const tempTextarea = document.createElement('textarea');
    Â  Â  Â  Â  Â  Â  tempTextarea.value = clipboardText;
    Â  Â  Â  Â  Â  Â  document.body.appendChild(tempTextarea);
    Â  Â  Â  Â  Â  Â  tempTextarea.select();
    Â  Â  Â  Â  Â  Â  document.execCommand('copy');
    Â  Â  Â  Â  Â  Â  document.body.removeChild(tempTextarea);
    
    Â  Â  Â  Â  Â  Â  showMessage("Table data copied to clipboard! You can now paste it into a spreadsheet.");
    Â  Â  Â  Â  });
    
    Â  Â  Â  Â  // Event listener for the "Export as CSV" button
    Â  Â  Â  Â  exportCsvButton.addEventListener('click', () => {
    Â  Â  Â  Â  Â  Â  if (tableData.length === 0) {
    Â  Â  Â  Â  Â  Â  Â  Â  showMessage("No data to export. Add some rows first.", "error");
    Â  Â  Â  Â  Â  Â  Â  Â  return;
    Â  Â  Â  Â  Â  Â  }
    Â  Â  Â  Â  Â  Â  
    Â  Â  Â  Â  Â  Â  // Create the CSV content
    Â  Â  Â  Â  Â  Â  let csvContent = headers.map(h => `"${h.name.replace(/"/g, '""')}"`).join(',') + '\n';
    Â  Â  Â  Â  Â  Â  tableData.forEach(row => {
    Â  Â  Â  Â  Â  Â  Â  Â  const rowValues = headers.map(header => {
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const value = row[header.name];
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Escape double quotes and wrap in quotes to handle commas within data
    Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return `"${String(value).replace(/"/g, '""')}"`;
    Â  Â  Â  Â  Â  Â  Â  Â  });
    Â  Â  Â  Â  Â  Â  Â  Â  csvContent += rowValues.join(',') + '\n';
    Â  Â  Â  Â  Â  Â  });
    
    Â  Â  Â  Â  Â  Â  // Create a Blob and a download link
    Â  Â  Â  Â  Â  Â  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
    Â  Â  Â  Â  Â  Â  const url = URL.createObjectURL(blob);
    Â  Â  Â  Â  Â  Â  const link = document.createElement('a');
    Â  Â  Â  Â  Â  Â  link.setAttribute('href', url);
    Â  Â  Â  Â  Â  Â  link.setAttribute('download', 'nafass_perfumes_data.csv');
    Â  Â  Â  Â  Â  Â  link.style.visibility = 'hidden';
    Â  Â  Â  Â  Â  Â  document.body.appendChild(link);
    Â  Â  Â  Â  Â  Â  link.click();
    Â  Â  Â  Â  Â  Â  document.body.removeChild(link);
    Â  Â  Â  Â  Â  Â  URL.revokeObjectURL(url);
    
    Â  Â  Â  Â  Â  Â  showMessage("Table exported as nafass_perfumes_data.csv!");
    Â  Â  Â  Â  });
            
            // Event listener for the "Import CSV File" button
            csvFileInput.addEventListener('change', handleFileImport);
            
            // Function to handle the file upload
            function handleFileImport(event) {
                const file = event.target.files[0];
                if (!file) {
                    return;
                }
    
                const reader = new FileReader();
                reader.onload = function(e) {
                    const content = e.target.result;
                    parseCsvContent(content);
                };
                reader.readAsText(file);
            }
    
            // Function to parse the CSV content and update the table data
            function parseCsvContent(csvString) {
                const lines = csvString.split('\n').filter(line => line.trim() !== '');
                if (lines.length <= 1) {
                    showMessage("CSV file is empty or has no data rows.", "error");
                    tableData = [];
                    renderTable();
                    return;
                }
    
                const fileHeaders = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
                const newTableData = [];
    
                for (let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(',').map(v => v.trim().replace(/"/g, ''));
                    if (values.length !== fileHeaders.length) {
                        console.warn(`Skipping malformed row: ${lines[i]}`);
                        continue;
                    }
                    const rowObject = {};
                    fileHeaders.forEach((header, index) => {
                        const headerName = headers.find(h => h.name === header)?.name;
                        if (headerName) {
                            rowObject[headerName] = values[index];
                        }
                    });
                    // Assign a new, auto-incremented ID
                    rowObject.id = newTableData.length + 1;
                    newTableData.push(rowObject);
                }
    
                tableData = newTableData;
                renderTable();
                showMessage(`Successfully imported ${tableData.length} rows from CSV!`);
            }
    Â  Â  </script>
    </body>
    </html>